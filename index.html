<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cory Ziller - Portfolio</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --space-1: 8px; --space-2: 16px; --space-3: 24px; --space-4: 32px;
            --space-5: 40px; --space-6: 48px; --space-8: 64px; --space-10: 80px;
            --space-12: 96px; --space-16: 128px;
            --text-xs: 0.75rem; --text-sm: 0.875rem; --text-base: 1rem;
            --text-lg: 1.125rem; --text-xl: 1.25rem; --text-2xl: 1.5rem;
            --text-3xl: 1.875rem; --text-4xl: 2.25rem; --text-5xl: 3rem;
            --bg-primary: #0a0a0a; --bg-secondary: #1a1a1a;
            --text-primary: #ffffff; --text-secondary: rgba(255, 255, 255, 0.7);
            --text-tertiary: rgba(255, 255, 255, 0.5);
            --border-subtle: rgba(255, 255, 255, 0.1);
            --spotify-green: #1DB954;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: var(--text-base);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: var(--space-4);
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
        }

        .hero-content { max-width: 1100px; width: 100%; animation: fadeIn 0.8s ease-out; }
        .hero-grid { display: grid; grid-template-columns: 350px 1fr; gap: var(--space-8); align-items: start; margin-bottom: var(--space-4); }
        .hero-left { animation: slideUp 0.6s ease-out; }
        
        .profile-photo {
            width: 240px; height: 240px; border-radius: 16px;
            background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto var(--space-4); overflow: hidden;
            box-shadow: 0 8px 32px rgba(255, 255, 255, 0.15); transition: all 0.4s;
        }

        .profile-photo img { width: 100%; height: 100%; object-fit: cover; }
        .profile-photo:hover { transform: translateY(-4px); box-shadow: 0 12px 48px rgba(255, 255, 255, 0.2); }
        .hero-greeting { font-size: 1.125rem; font-weight: 500; color: var(--text-secondary); margin-bottom: var(--space-1); }
        .hero-name { font-size: 3.5rem; font-weight: 800; line-height: 1.05; letter-spacing: -0.03em; white-space: nowrap; }
        .hero-right { padding-left: var(--space-8); padding-top: var(--space-4); animation: slideUp 0.7s ease-out 0.1s both; }
        .credential-item { position: relative; margin-bottom: var(--space-4); padding-left: var(--space-3); }
        .credential-bullet { position: absolute; left: 0; top: 6px; width: 6px; height: 6px; border-radius: 50%; background: var(--text-primary); box-shadow: 0 0 8px rgba(255, 255, 255, 0.4); }
        .credential-label { font-size: var(--text-base); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-tertiary); margin-bottom: var(--space-1); }
        .credential-text { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); line-height: 1.5; }
        .tagline-bridge { text-align: center; margin: var(--space-4) auto var(--space-2); padding: 0 var(--space-4); max-width: 800px; animation: fadeIn 0.8s ease-out 0.3s both; }
        .tagline-text { font-size: 1.25rem; font-weight: 500; font-style: italic; color: var(--text-secondary); line-height: 1.4; margin-bottom: var(--space-2); }
        .cta-container { display: flex; gap: var(--space-2); justify-content: center; align-items: flex-end; }
        .arrow-wrapper { display: flex; flex-direction: column; align-items: center; }
        .bouncing-arrow { font-size: var(--text-5xl); margin-bottom: var(--space-2); animation: bounce 2s ease-in-out infinite; color: var(--text-secondary); }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-16px); }
            60% { transform: translateY(-8px); }
        }

        .btn {
            display: inline-block; padding: 14px 32px; background: var(--text-primary);
            color: var(--bg-primary); text-decoration: none; border-radius: 100px;
            font-weight: 600; transition: all 0.3s; border: 2px solid transparent; cursor: pointer;
        }

        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(255, 255, 255, 0.15); }
        .btn-outline { background: transparent; color: var(--text-primary); border: 2px solid rgba(255, 255, 255, 0.3); }
        .btn-outline:hover { background: rgba(255, 255, 255, 0.05); }

        .works-section { padding: var(--space-16) var(--space-4); background: var(--bg-primary); }
        .works-container { max-width: 1280px; margin: 0 auto; }
        .works-header { text-align: center; margin-bottom: var(--space-8); }
        .works-header h2 { font-size: var(--text-5xl); margin-bottom: var(--space-3); font-weight: 800; }
        .works-subtitle { font-size: var(--text-lg); color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        .work-card { border-radius: 16px; transition: all 0.4s; cursor: pointer; }
        .work-card:hover { transform: translateY(-8px); box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4); }
        .work-card.expanded { grid-column: 1 / -1; transform: translateY(0); max-width: 1600px; margin: 0 auto; }
        .work-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease; }
        .work-card.expanded .work-details { max-height: 75vh; padding: var(--space-4); overflow-y: auto; }
        .scroll-section { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease, transform 0.8s ease; }
        .scroll-section.visible { opacity: 1; transform: translateY(0); }
        .close-btn { display: none; margin: var(--space-3) auto; padding: 12px 32px; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.2); color: white; border-radius: 100px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .work-card.expanded .close-btn { display: block; }
        .quad-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); }

        /* FULLSCREEN DASHBOARD */
        .fullscreen-modal {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: #000000; z-index: 9999; overflow-y: auto;
        }

        .fullscreen-modal.active { display: block; animation: fadeIn 0.3s ease; }

        .modal-close-btn {
            position: fixed; top: 24px; right: 24px; width: 48px; height: 48px;
            background: rgba(255, 255, 255, 0.08); border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%; color: #FFFFFF; font-size: 28px; font-weight: 300;
            cursor: pointer; transition: all 0.3s; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
        }

        .modal-close-btn:hover {
            background: rgba(255, 0, 0, 0.2);
            border-color: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
        }

        .dashboard-container { max-width: 1800px; margin: 0 auto; padding: var(--space-8) var(--space-4); }
        
        .dashboard-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: var(--space-6); padding-bottom: var(--space-4);
            border-bottom: 1px solid rgba(29, 185, 84, 0.3);
        }

        .dashboard-title { font-size: 2rem; font-weight: 900; color: #FFFFFF; }
        .dashboard-subtitle { font-size: 0.875rem; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 0.1em; }

        /* TABS */
        .tab-navigation { display: flex; gap: var(--space-2); margin-bottom: var(--space-6); border-bottom: 1px solid rgba(255, 255, 255, 0.15); }
        
        .tab-btn {
            padding: 12px 24px; background: transparent; border: none;
            border-bottom: 3px solid transparent; color: rgba(255, 255, 255, 0.6);
            font-weight: 700; font-size: 0.9375rem; cursor: pointer; transition: all 0.2s;
            text-transform: uppercase; letter-spacing: 0.05em;
        }

        .tab-btn:hover { color: #FFFFFF; border-bottom-color: rgba(29, 185, 84, 0.5); }
        .tab-btn.active { color: var(--spotify-green); border-bottom-color: var(--spotify-green); }

        /* STATS CARDS */
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--space-3); margin-bottom: var(--space-6);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px; padding: var(--space-4); transition: all 0.3s;
        }

        .stat-card:hover { background: rgba(255, 255, 255, 0.08); border-color: rgba(29, 185, 84, 0.5); transform: translateY(-2px); }
        .stat-value { font-size: 2.5rem; font-weight: 900; color: var(--spotify-green); margin-bottom: var(--space-1); line-height: 1; }
        .stat-label { font-size: 0.75rem; color: rgba(255, 255, 255, 0.7); text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; }

        /* DATA TABLES */
        .data-table {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px; overflow: hidden; margin-bottom: var(--space-4);
            min-height: 600px; display: flex; flex-direction: column;
        }

        .table-header { background: rgba(29, 185, 84, 0.15); padding: var(--space-3); border-bottom: 1px solid rgba(29, 185, 84, 0.3); }
        .table-title { font-size: 1.125rem; font-weight: 800; color: #FFFFFF; }
        
        .table-row {
            display: grid; grid-template-columns: 50px 1fr 120px; gap: var(--space-3);
            padding: var(--space-3) var(--space-3); border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            align-items: center; transition: all 0.2s;
            min-height: 80px;
        }

        .table-row:hover { background: rgba(29, 185, 84, 0.08); }
        .rank { font-weight: 900; color: var(--spotify-green); font-size: 1.125rem; }
        .item-info { flex: 1; }
        .item-name { font-weight: 700; color: #FFFFFF; margin-bottom: 2px; }
        .item-detail { font-size: 0.8125rem; color: rgba(255, 255, 255, 0.6); }
        .item-count { font-weight: 700; color: #FFFFFF; text-align: right; }

        /* YEAR SLIDER */
        .year-filter-container {
            background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px; padding: var(--space-4); margin-bottom: var(--space-6);
        }

        .year-filter-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-3); }
        .year-filter-label { font-size: 0.875rem; font-weight: 700; color: rgba(255, 255, 255, 0.8); text-transform: uppercase; }
        .year-display { font-size: 1.5rem; font-weight: 900; color: var(--spotify-green); }

        .year-slider-wrapper { margin-top: var(--space-3); }
        
        .year-slider {
            width: 100%; height: 8px; border-radius: 4px;
            background: linear-gradient(to right, var(--spotify-green) 0%, rgba(29, 185, 84, 0.3) 100%);
            outline: none; -webkit-appearance: none; appearance: none;
        }

        .year-slider::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 24px; height: 24px; border-radius: 50%;
            background: var(--spotify-green); cursor: pointer;
            box-shadow: 0 2px 8px rgba(29, 185, 84, 0.5);
            border: 3px solid #000;
        }

        .year-slider::-moz-range-thumb {
            width: 24px; height: 24px; border-radius: 50%;
            background: var(--spotify-green); cursor: pointer; border: 3px solid #000;
            box-shadow: 0 2px 8px rgba(29, 185, 84, 0.5);
        }

        .year-marks {
            display: flex; justify-content: space-between; margin-top: var(--space-1);
            padding: 0 12px;
        }

        .year-mark {
            font-size: 0.75rem; color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }

        /* CHARTS */
        .chart-container {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px; padding: var(--space-4); margin-bottom: var(--space-4); height: 400px;
        }

        .chart-title { font-size: 1.125rem; font-weight: 800; color: #FFFFFF; margin-bottom: var(--space-3); }

        /* WORD CLOUD */
        .word-cloud-container {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px; padding: var(--space-6); min-height: 400px;
            display: flex; flex-wrap: wrap; align-items: center; justify-content: center;
            gap: var(--space-2);
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 1024px) {
            .hero-grid { grid-template-columns: 1fr; gap: var(--space-8); text-align: center; }
            .hero-right { padding-left: 0; }
            .credential-item { text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
        }

        html { scroll-behavior: smooth; }
    </style>
</head>
<body>
    <section class="hero">
        <div class="hero-content">
            <div class="hero-grid">
                <div class="hero-left">
                    <div class="profile-photo">
                        <img src="profile.jpg" alt="Cory Ziller" onerror="this.parentElement.innerHTML='CZ';">
                    </div>
                    <div style="text-align: left;">
                        <p class="hero-greeting">Hey there,</p>
                        <h1 class="hero-name">I'm Cory Ziller</h1>
                    </div>
                </div>

                <div class="hero-right">
                    <div class="credential-item">
                        <div class="credential-bullet"></div>
                        <div class="credential-label">Current</div>
                        <p class="credential-text">STEM MBA candidate at Ohio State.</p>
                    </div>

                    <div class="credential-item">
                        <div class="credential-bullet"></div>
                        <div class="credential-label">Previously</div>
                        <p class="credential-text">Sr. Data Analyst at a Chicago-based advertising agency.</p>
                    </div>

                    <div class="credential-item">
                        <div class="credential-bullet"></div>
                        <div class="credential-label">Early Experience</div>
                        <p class="credential-text">AI startup experience supporting law enforcement adoption of anti-trafficking technology.</p>
                    </div>
                </div>
            </div>

            <div class="tagline-bridge">
                <p class="tagline-text">I love turning ideas into automation. Check it out!</p>

                <div class="cta-container">
                    <a href="https://www.linkedin.com/in/cory-ziller/" target="_blank" class="btn btn-outline">View LinkedIn</a>

                    <div class="arrow-wrapper">
                        <div class="bouncing-arrow">↓</div>
                        <a href="#works" class="btn">Side Projects</a>
                    </div>

                    <a href="#" class="btn btn-outline">Work History</a>
                </div>
            </div>
        </div>
    </section>

    <section class="works-section" id="works">
        <div class="works-container">
            <div class="works-header">
                <h2>Side Projects</h2>
                <p class="works-subtitle">Automation workflows that creatively solve problems and save time</p>
            </div>

            <div style="margin-top: 80px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; max-width: 1200px; margin: 0 auto;">

                    <!-- Card 1: Social Listening -->
                    <div class="work-card quad-card" id="social-card" onclick="toggleCard('social-card')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 40px; color: white; position: relative; min-height: 280px; transition: transform 0.3s ease; cursor: pointer;">
                        <div style="background: white; width: 48px; height: 48px; border-radius: 8px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center;">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 12h3"></path><path d="M6 8v8"></path><path d="M9 5v14"></path><path d="M12 3v18"></path><path d="M15 5v14"></path><path d="M18 8v8"></path><path d="M21 12h-3"></path>
                            </svg>
                        </div>
                        <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 16px; line-height: 1.3;">
                            TRACK USER PRODUCT SENTIMENT ACROSS REDDIT & HACKER NEWS
                        </h3>
                        <p style="font-size: 1rem; line-height: 1.6; opacity: 0.95;">
                            Automates user sentiment tracking for product teams. Scrapes Reddit and Hacker News daily, analyzes feedback, and emails a 30-second audio summary.
                        </p>

                        <div class="work-details">
                            <div style="border-top: 1px solid rgba(255,255,255,0.2); margin-top: var(--space-4); padding-top: var(--space-6);">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; margin-bottom: var(--space-8);">

                                    <div>
                                        <div style="margin-bottom: 48px;">
                                            <h4 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 16px;">The Idea</h4>
                                            <p style="font-size: 1.0625rem; line-height: 1.7;">
                                                NVIDIA product managers need to track user sentiment to prioritize product features and understand pain points, but checking Reddit and Hacker News daily takes hours. Automate the entire process.
                                            </p>
                                        </div>

                                        <div style="margin-bottom: 48px;">
                                            <h4 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 20px;">What I Built</h4>
                                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                                <div style="padding-left: 12px; border-left: 2px solid rgba(255,255,255,0.3);">
                                                    <div style="font-weight: 700; margin-bottom: 4px;">Scrape</div>
                                                    <div style="font-size: 0.9375rem; opacity: 0.75;">Reddit & Hacker News daily</div>
                                                    <div style="font-size: 0.8125rem; opacity: 0.5; margin-top: 2px;">Python + Public APIs</div>
                                                </div>
                                                <div style="opacity: 0.5; margin-left: 12px;">↓</div>
                                                <div style="padding-left: 12px; border-left: 2px solid rgba(255,255,255,0.3);">
                                                    <div style="font-weight: 700; margin-bottom: 4px;">Analyze</div>
                                                    <div style="font-size: 0.9375rem; opacity: 0.75;">Sentiment & categorization</div>
                                                    <div style="font-size: 0.8125rem; opacity: 0.5; margin-top: 2px;">OpenAI API</div>
                                                </div>
                                                <div style="opacity: 0.5; margin-left: 12px;">↓</div>
                                                <div style="padding-left: 12px; border-left: 2px solid rgba(255,255,255,0.3);">
                                                    <div style="font-weight: 700; margin-bottom: 4px;">Generate</div>
                                                    <div style="font-size: 0.9375rem; opacity: 0.75;">30-second audio summary</div>
                                                    <div style="font-size: 0.8125rem; opacity: 0.5; margin-top: 2px;">Google Text-to-Speech</div>
                                                </div>
                                                <div style="opacity: 0.5; margin-left: 12px;">↓</div>
                                                <div style="padding-left: 12px; border-left: 2px solid rgba(255,255,255,0.3);">
                                                    <div style="font-weight: 700; margin-bottom: 4px;">Email</div>
                                                    <div style="font-size: 0.9375rem; opacity: 0.75;">Automated delivery</div>
                                                    <div style="font-size: 0.8125rem; opacity: 0.5; margin-top: 2px;">Brevo API</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <h4 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 16px;">The Impact</h4>
                                            <p style="font-size: 1.0625rem; line-height: 1.7;">
                                                Daily automated insights from Reddit & Hacker News on product sentiment. Zero manual work. Always fresh data.
                                            </p>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="scroll-section" style="text-align: center; background: rgba(255,255,255,0.1); padding: 40px 32px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2);">
                                            <div style="margin-bottom: 32px;">
                                                <span style="font-size: 0.8125rem; font-weight: 600; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.1em;">See It In Action</span>
                                                <h3 style="font-size: 2rem; font-weight: 800; margin-top: 12px; margin-bottom: 16px;">Try the workflow</h3>
                                                <p style="font-size: 1rem; opacity: 0.85; line-height: 1.6;">
                                                    Get a sample email with real sentiment data and an audio briefing.
                                                </p>
                                            </div>
                                            <form id="socialListeningForm" onclick="event.stopPropagation()">
                                                <div style="margin-bottom: var(--space-3); text-align: left;">
                                                    <label style="display: block; margin-bottom: var(--space-2); font-weight: 600;">Your Name</label>
                                                    <input type="text" id="nameInput" placeholder="John Doe" required
                                                        style="width: 100%; padding: 16px; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; background: rgba(255, 255, 255, 0.95); font-size: 1rem; color: #000;">
                                                </div>
                                                <div style="margin-bottom: var(--space-4); text-align: left;">
                                                    <label style="display: block; margin-bottom: var(--space-2); font-weight: 600;">Your Email</label>
                                                    <input type="email" id="emailInput" placeholder="john@example.com" required
                                                        style="width: 100%; padding: 16px; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; background: rgba(255, 255, 255, 0.95); font-size: 1rem; color: #000;">
                                                </div>
                                                <button type="submit" style="width: 100%; padding: 16px 32px; background: white; color: #667eea; border: none; border-radius: 12px; font-size: 1.125rem; font-weight: 700; cursor: pointer;">
                                                    Send Me the Demo Report
                                                </button>
                                                <div id="demoResult" style="margin-top: var(--space-4); padding: var(--space-3); background: rgba(255, 255, 255, 0.1); border-radius: 12px; display: none;"></div>
                                            </form>
                                        </div>
                                    </div>

                                </div>

                                <button class="close-btn" onclick="toggleCard('social-card'); event.stopPropagation();">Close</button>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: SPOTIFY TRENDS -->
                    <div class="work-card quad-card" onclick="openSpotifyDashboard()" style="background: linear-gradient(135deg, #1DB954 0%, #1ed760 100%); border-radius: 16px; padding: 40px; color: white; position: relative; min-height: 280px; transition: transform 0.3s ease; cursor: pointer;">
                        <div style="background: white; width: 48px; height: 48px; border-radius: 8px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center;">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#1DB954" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                        </div>
                        <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: 16px; line-height: 1.3; color: #000000;">
                            SPOTIFY TRENDS: 13 YEARS OF LISTENING
                        </h3>
                        <p style="font-size: 1rem; line-height: 1.6; color: #000000; font-weight: 500;">
                            Visualizes 13+ years of Spotify data showing artist evolution, top tracks, and listening patterns from 2012-2026. 6,500+ hours analyzed.
                        </p>
                    </div>

                    <!-- Card 3 -->
                    <div class="quad-card" style="background: linear-gradient(135deg, #E89BA7 0%, #D67886 100%); border-radius: 16px; padding: 40px; color: white; min-height: 280px;">
                        <div style="background: white; width: 48px; height: 48px; border-radius: 8px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center;">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#E89BA7" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                        </div>
                        <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 16px;">MORE TO COME...</h3>
                        <p style="font-size: 1rem; line-height: 1.6;">New projects in the works.</p>
                    </div>

                    <!-- Card 4 -->
                    <div class="quad-card" style="background: linear-gradient(135deg, #D4B896 0%, #B89968 100%); border-radius: 16px; padding: 40px; color: white; min-height: 280px;">
                        <div style="background: white; width: 48px; height: 48px; border-radius: 8px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center;">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#D4B896" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                        </div>
                        <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 16px;">MORE TO COME...</h3>
                        <p style="font-size: 1rem; line-height: 1.6;">New projects in the works.</p>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- FULLSCREEN BLACK DASHBOARD -->
    <div id="spotifyModal" class="fullscreen-modal">
        <button class="modal-close-btn" onclick="closeSpotifyDashboard()">×</button>

        <div class="dashboard-container">
            <div class="dashboard-header">
                <div>
                    <h1 class="dashboard-title">Spotify Listening Analytics</h1>
                    <p class="dashboard-subtitle">Data through February 15, 2026 | 2012-2026</p>
                </div>
            </div>

            <div class="tab-navigation">
                <button class="tab-btn active" onclick="switchTab('overview', event)">Overview</button>
                <button class="tab-btn" onclick="switchTab('evolution', event)">Artist Evolution</button>
                <button class="tab-btn" onclick="switchTab('genres', event)">Genre Evolution</button>
                <button class="tab-btn" onclick="switchTab('charts', event)">Charts & Trends</button>
                <button class="tab-btn" onclick="switchTab('insights', event)">Word Cloud</button>
            </div>

            <div id="dashboardContent">
                <p style="text-align: center; padding: var(--space-8); color: rgba(255,255,255,0.5);">Loading analytics...</p>
            </div>
        </div>
    </div>

    <script>
        const SPOTIFY_DATA = { stats: null, artistEvolution: null, monthlyTrends: null, topSongs: null };
        let currentTab = 'overview';
        let selectedYear = 'all';

        async function loadSpotifyData() {
            try {
                const [stats, artistEvolution, monthlyTrends, topSongs] = await Promise.all([
                    fetch('spotify-trends/basic_stats.json').then(r => r.json()),
                    fetch('spotify-trends/artist_evolution.json').then(r => r.json()),
                    fetch('spotify-trends/monthly_trends.json').then(r => r.json()),
                    fetch('spotify-trends/top_songs_by_period.json').then(r => r.json())
                ]);

                SPOTIFY_DATA.stats = stats;
                SPOTIFY_DATA.artistEvolution = artistEvolution;
                SPOTIFY_DATA.monthlyTrends = monthlyTrends;
                SPOTIFY_DATA.topSongs = topSongs;

                // Filter out unwanted artists
                filterOutArtist('Meghan Trainor');
                filterOutArtist('Unknown');

                return true;
            } catch (error) {
                console.error('Error loading Spotify data:', error);
                return false;
            }
        }

        function filterOutArtist(artistName) {
            const artistLower = artistName.toLowerCase();

            if (SPOTIFY_DATA.stats && SPOTIFY_DATA.stats.top_artists_all_time) {
                delete SPOTIFY_DATA.stats.top_artists_all_time[artistName];
            }

            if (SPOTIFY_DATA.stats && SPOTIFY_DATA.stats.top_tracks_all_time) {
                SPOTIFY_DATA.stats.top_tracks_all_time = SPOTIFY_DATA.stats.top_tracks_all_time.filter(
                    track => track.artist.toLowerCase() !== artistLower
                );
            }

            if (SPOTIFY_DATA.artistEvolution) {
                Object.keys(SPOTIFY_DATA.artistEvolution).forEach(year => {
                    SPOTIFY_DATA.artistEvolution[year] = SPOTIFY_DATA.artistEvolution[year].filter(
                        artist => artist.artist.toLowerCase() !== artistLower
                    );
                });
            }
        }

        async function openSpotifyDashboard() {
            const modal = document.getElementById('spotifyModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            if (!SPOTIFY_DATA.stats) {
                await loadSpotifyData();
            }
            switchTab('overview');
        }

        function closeSpotifyDashboard() {
            document.getElementById('spotifyModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function switchTab(tabName, event) {
            currentTab = tabName;

            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

            // Find and activate the correct tab button
            const tabButtons = {
                'overview': 0,
                'evolution': 1,
                'genres': 2,
                'charts': 3,
                'insights': 4
            };

            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                const buttons = document.querySelectorAll('.tab-btn');
                if (buttons[tabButtons[tabName]]) {
                    buttons[tabButtons[tabName]].classList.add('active');
                }
            }

            renderTabContent(tabName);
        }

        function renderTabContent(tabName) {
            const content = document.getElementById('dashboardContent');

            switch(tabName) {
                case 'overview':
                    content.innerHTML = renderOverviewTab();
                    break;
                case 'evolution':
                    content.innerHTML = renderEvolutionTab();
                    break;
                case 'genres':
                    content.innerHTML = renderGenresTab();
                    setTimeout(() => renderGenreChart(), 100);
                    break;
                case 'charts':
                    content.innerHTML = renderChartsTab();
                    setTimeout(() => renderCharts(), 100);
                    break;
                case 'insights':
                    content.innerHTML = renderInsightsTab();
                    setTimeout(() => {
                        const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
                        const latestYear = years[years.length - 1];
                        generateWordCloud(latestYear);
                    }, 100);
                    break;
            }
        }

        function renderOverviewTab() {
            const stats = SPOTIFY_DATA.stats;
            if (!stats) return '<p>Loading...</p>';

            return `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${(stats.total_hours / 1000).toFixed(1)}k</div>
                        <div class="stat-label">Hours Listened</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${(stats.total_plays / 1000).toFixed(1)}k</div>
                        <div class="stat-label">Total Plays</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${(stats.unique_tracks / 1000).toFixed(1)}k</div>
                        <div class="stat-label">Unique Tracks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${(stats.unique_artists / 1000).toFixed(1)}k</div>
                        <div class="stat-label">Unique Artists</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-6); margin-top: var(--space-6); align-items: stretch; grid-auto-rows: 1fr;">
                    <div class="data-table">
                        <div class="table-header">
                            <div class="table-title">Top Artists (All Time)</div>
                        </div>
                        ${Object.entries(stats.top_artists_all_time).slice(0, 10).map(([artist, count], i) => `
                            <div class="table-row">
                                <div class="rank">#${i + 1}</div>
                                <div class="item-info">
                                    <div class="item-name">${artist}</div>
                                </div>
                                <div class="item-count">${count.toLocaleString()} plays</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="data-table">
                        <div class="table-header">
                            <div class="table-title">Top Tracks (All Time)</div>
                        </div>
                        ${stats.top_tracks_all_time.slice(0, 10).map((item, i) => `
                            <div class="table-row">
                                <div class="rank">#${i + 1}</div>
                                <div class="item-info">
                                    <div class="item-name">${item.track}</div>
                                    <div class="item-detail">${item.artist}</div>
                                </div>
                                <div class="item-count">${item.play_count.toLocaleString()}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderEvolutionTab() {
            const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
            const yearCount = years.length;

            return `
                <div class="year-filter-container">
                    <div class="year-filter-header">
                        <div class="year-filter-label">Select Year</div>
                        <div class="year-display" id="yearDisplay">${years[yearCount - 1]}</div>
                    </div>
                    <div class="year-slider-wrapper">
                        <input type="range" class="year-slider" id="yearSlider"
                               min="0" max="${yearCount - 1}" value="${yearCount - 1}"
                               oninput="updateYearFromSlider(this.value)">
                        <div class="year-marks" id="yearMarks" style="justify-content: center;">
                            <div class="year-mark">${years[yearCount - 1]}</div>
                            <div class="year-mark" style="display: none;"></div>
                        </div>
                    </div>
                </div>

                <div id="artistEvolutionContainer">
                    ${renderArtistEvolution(years[yearCount - 1], yearCount - 1)}
                </div>
            `;
        }

        function updateYearFromSlider(value) {
            const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
            const index = parseInt(value);

            selectedYear = years[index];

            document.getElementById('yearDisplay').textContent = years[index];

            // Update year marks to show adjacent years
            const yearMarks = document.getElementById('yearMarks');
            if (index === 0) {
                // First year: only show 2012 and 2013
                yearMarks.innerHTML = `
                    <div class="year-mark">${years[0]}</div>
                    <div class="year-mark">${years[1]}</div>
                `;
                yearMarks.style.justifyContent = 'center';
            } else if (index === years.length - 1) {
                // Last year: only show 2025 and 2026
                yearMarks.innerHTML = `
                    <div class="year-mark">${years[years.length - 2]}</div>
                    <div class="year-mark">${years[years.length - 1]}</div>
                `;
                yearMarks.style.justifyContent = 'center';
            } else {
                // Middle years: show previous, current, next
                yearMarks.innerHTML = `
                    <div class="year-mark">Previous Year</div>
                    <div class="year-mark">Current Year</div>
                    <div class="year-mark">Next Year</div>
                `;
                yearMarks.style.justifyContent = 'space-between';
            }

            document.getElementById('artistEvolutionContainer').innerHTML = renderArtistEvolution(years[index], index);
        }

        function renderArtistEvolution(year, yearIndex) {
            const evolution = SPOTIFY_DATA.artistEvolution || {};
            const allYears = Object.keys(evolution).sort();

            if (!evolution[year]) {
                return '<div style="text-align: center; padding: var(--space-8); color: rgba(255,255,255,0.5);">No data available for this year</div>';
            }

            // Get previous year's rankings for comparison
            let previousYearRankings = {};
            if (yearIndex > 0) {
                const prevYear = allYears[yearIndex - 1];
                if (evolution[prevYear]) {
                    evolution[prevYear].forEach((artist, idx) => {
                        previousYearRankings[artist.artist] = idx + 1;
                    });
                }
            }

            const artists = evolution[year];

            return `
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">${year} Top Artists</div>
                    </div>
                    ${artists.slice(0, 10).map((artist, i) => {
                        const currentRank = i + 1;
                        const previousRank = previousYearRankings[artist.artist];

                        let rankChange = '';
                        if (!previousRank || previousRank > 10) {
                            rankChange = '<span style="color: #1DB954; font-weight: 700; font-size: 0.875rem;">NEW</span>';
                        } else {
                            const change = previousRank - currentRank;
                            if (change > 0) {
                                rankChange = '<span style="color: #1DB954; font-weight: 700; font-size: 1.125rem;">↑</span>';
                            } else if (change < 0) {
                                rankChange = '<span style="color: #ec4899; font-weight: 700; font-size: 1.125rem;">↓</span>';
                            }
                        }

                        return `
                        <div class="table-row">
                            <div class="rank">#${currentRank}</div>
                            <div class="item-info">
                                <div class="item-name">${artist.artist}</div>
                                <div class="item-detail">${rankChange}</div>
                            </div>
                            <div class="item-count">${artist.play_count.toLocaleString()} plays</div>
                        </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderGenresTab() {
            return `
                <div style="margin-bottom: var(--space-4); text-align: center; color: rgba(255,255,255,0.7);">
                    <p style="font-size: 1.125rem; margin-bottom: var(--space-2);">Genre Evolution</p>
                    <p style="font-size: 0.875rem; line-height: 1.6; max-width: 600px; margin: 0 auto;">
                        Track how your music taste has evolved over 13 years. See which genres dominated each era of your listening history,
                        from the genres you discovered first to the sounds you can't stop playing today.
                    </p>
                </div>

                <div class="chart-container" style="height: 500px;">
                    <div class="chart-title">Genre Distribution Over Time (Simulated)</div>
                    <canvas id="genreChart"></canvas>
                </div>
            `;
        }

        function renderGenreChart() {
            const ctx = document.getElementById('genreChart');
            if (!ctx) return;

            // Simulated genre data based on artist names
            const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Pop',
                            data: years.map(() => Math.random() * 40 + 20),
                            borderColor: '#1DB954',
                            backgroundColor: 'rgba(29, 185, 84, 0.1)',
                            borderWidth: 3,
                            tension: 0.4
                        },
                        {
                            label: 'Electronic',
                            data: years.map(() => Math.random() * 30 + 15),
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 3,
                            tension: 0.4
                        },
                        {
                            label: 'Hip Hop',
                            data: years.map(() => Math.random() * 25 + 10),
                            borderColor: '#ec4899',
                            backgroundColor: 'rgba(236, 72, 153, 0.1)',
                            borderWidth: 3,
                            tension: 0.4
                        },
                        {
                            label: 'Rock',
                            data: years.map(() => Math.random() * 20 + 5),
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 3,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: { color: 'rgba(255, 255, 255, 0.8)' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            titleColor: '#1DB954',
                            bodyColor: '#FFFFFF',
                            borderColor: '#1DB954',
                            borderWidth: 1,
                            padding: 16,
                            displayColors: false,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 12 },
                            callbacks: {
                                title: function(context) {
                                    return context[0].label + ' Top Artists';
                                },
                                label: function(context) {
                                    return null; // Hide the default label
                                },
                                afterBody: function(context) {
                                    const year = context[0].label;
                                    const evolution = SPOTIFY_DATA.artistEvolution;

                                    if (evolution && evolution[year]) {
                                        const topArtists = evolution[year].slice(0, 5);
                                        return topArtists.map((artist, i) =>
                                            `${i + 1}. ${artist.artist}`
                                        );
                                    }
                                    return ['No data available'];
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
                            title: { display: true, text: 'Percentage of Listening', color: 'rgba(255, 255, 255, 0.7)' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                        }
                    }
                }
            });
        }

        function renderChartsTab() {
            return `
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-4); margin-bottom: var(--space-4);">
                    <div class="chart-container">
                        <div class="chart-title">Listening Hours Over Time</div>
                        <canvas id="hoursChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Total Plays by Year</div>
                        <canvas id="playsChart"></canvas>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-4); margin-bottom: var(--space-4);">
                    <div class="chart-container">
                        <div class="chart-title">Top 10 Artists (All Time)</div>
                        <canvas id="topArtistsChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Monthly Listening Pattern</div>
                        <canvas id="monthlyPatternChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Listening Activity Timeline</div>
                    <canvas id="activityTimelineChart"></canvas>
                </div>
            `;
        }

        function renderInsightsTab() {
            const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
            const yearCount = years.length;

            return `
                <div style="margin-bottom: var(--space-3); text-align: center;">
                    <h3 style="font-size: 1.5rem; font-weight: 800; color: #FFFFFF; margin-bottom: var(--space-2);">Your Music DNA</h3>
                    <p style="color: rgba(255,255,255,0.6);">Most common words from your top tracks and artists</p>
                </div>

                <div class="year-filter-container">
                    <div class="year-filter-header">
                        <div class="year-filter-label">Select Year</div>
                        <div class="year-display" id="wordCloudYearDisplay">${years[yearCount - 1]}</div>
                    </div>
                    <div class="year-slider-wrapper">
                        <input type="range" class="year-slider" id="wordCloudYearSlider"
                               min="0" max="${yearCount - 1}" value="${yearCount - 1}"
                               oninput="updateWordCloudYear(this.value)">
                        <div class="year-marks" id="wordCloudYearMarks" style="justify-content: center;">
                            <div class="year-mark">${years[yearCount - 1]}</div>
                        </div>
                    </div>
                </div>

                <div class="word-cloud-container" id="wordCloud"></div>
            `;
        }

        function generateWordCloud(year) {
            if (!SPOTIFY_DATA.stats && !SPOTIFY_DATA.topSongs) return;

            const stopWords = ['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'from', 'feat', 'ft'];
            const wordFreq = {};

            // Get data source for the specific year
            let dataSource = [];
            if (SPOTIFY_DATA.topSongs && SPOTIFY_DATA.topSongs[year]) {
                dataSource = SPOTIFY_DATA.topSongs[year];
            } else if (SPOTIFY_DATA.artistEvolution && SPOTIFY_DATA.artistEvolution[year]) {
                // Fallback: use artist names from artist evolution data
                SPOTIFY_DATA.artistEvolution[year].forEach(item => {
                    const words = item.artist.toLowerCase().split(/[\s\-_.,!?;:()\[\]{}'"&/\\]+/);
                    words.forEach(word => {
                        if (word.length > 2 && !stopWords.includes(word)) {
                            wordFreq[word] = (wordFreq[word] || 0) + item.play_count;
                        }
                    });
                });
            }

            // Process track data if available
            if (dataSource.length > 0) {
                dataSource.forEach(item => {
                    const words = `${item.track || ''} ${item.artist || ''}`.toLowerCase().split(/[\s\-_.,!?;:()\[\]{}'"&/\\]+/);
                    words.forEach(word => {
                        if (word.length > 2 && !stopWords.includes(word)) {
                            wordFreq[word] = (wordFreq[word] || 0) + (item.play_count || 0);
                        }
                    });
                });
            }

            const sortedWords = Object.entries(wordFreq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 50);

            if (sortedWords.length === 0) {
                const cloudDiv = document.getElementById('wordCloud');
                if (cloudDiv) {
                    cloudDiv.innerHTML = '<p style="color: rgba(255,255,255,0.5);">No data available for this year</p>';
                }
                return;
            }

            const maxFreq = sortedWords[0][1];
            const minFreq = sortedWords[sortedWords.length - 1][1];

            const cloudDiv = document.getElementById('wordCloud');
            if (cloudDiv) {
                cloudDiv.innerHTML = sortedWords.map(([word, freq]) => {
                    const size = 14 + ((freq - minFreq) / (maxFreq - minFreq)) * 60;
                    const opacity = 0.6 + ((freq - minFreq) / (maxFreq - minFreq)) * 0.4;
                    const colors = ['#1DB954', '#1ed760', '#ec4899', '#a855f7', '#3b82f6', '#f59e0b'];
                    const color = colors[Math.floor(Math.random() * colors.length)];

                    return `<span style="font-size: ${size}px; color: ${color}; opacity: ${opacity}; font-weight: 800; padding: 6px 12px; transition: all 0.3s ease; cursor: default;" onmouseover="this.style.transform='scale(1.3)'; this.style.opacity='1';" onmouseout="this.style.transform='scale(1)'; this.style.opacity='${opacity}';">${word}</span>`;
                }).join('');
            }
        }

        function updateWordCloudYear(value) {
            const years = Object.keys(SPOTIFY_DATA.artistEvolution || {}).sort();
            const index = parseInt(value);
            const year = years[index];

            document.getElementById('wordCloudYearDisplay').textContent = year;

            // Update year marks
            const yearMarks = document.getElementById('wordCloudYearMarks');
            if (index === 0) {
                // First year: show 2012 and 2013
                yearMarks.innerHTML = `
                    <div class="year-mark">${years[0]}</div>
                    <div class="year-mark">${years[1]}</div>
                `;
                yearMarks.style.justifyContent = 'center';
            } else if (index === years.length - 1) {
                // Last year: show 2025 and 2026
                yearMarks.innerHTML = `
                    <div class="year-mark">${years[years.length - 2]}</div>
                    <div class="year-mark">${years[years.length - 1]}</div>
                `;
                yearMarks.style.justifyContent = 'center';
            } else {
                // Middle years: show Previous, Current, Next
                yearMarks.innerHTML = `
                    <div class="year-mark">Previous Year</div>
                    <div class="year-mark">Current Year</div>
                    <div class="year-mark">Next Year</div>
                `;
                yearMarks.style.justifyContent = 'space-between';
            }

            generateWordCloud(year);
        }

        function renderCharts() {
            if (!SPOTIFY_DATA.monthlyTrends) return;

            const monthlyData = SPOTIFY_DATA.monthlyTrends;

            const hoursCtx = document.getElementById('hoursChart');
            if (hoursCtx) {
                new Chart(hoursCtx, {
                    type: 'line',
                    data: {
                        labels: monthlyData.map(d => d.year_month),
                        datasets: [{
                            label: 'Hours',
                            data: monthlyData.map(d => d.minutes_played / 60),
                            borderColor: '#1DB954',
                            backgroundColor: 'rgba(29, 185, 84, 0.2)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 3,
                            pointHoverRadius: 6,
                            pointBackgroundColor: '#1DB954',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                titleColor: '#1DB954',
                                bodyColor: '#FFFFFF',
                                borderColor: '#1DB954',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.y.toFixed(1) + ' hours';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)', maxTicksLimit: 12 }
                            }
                        }
                    }
                });
            }

            const yearlyPlays = {};
            monthlyData.forEach(d => {
                if (d && d.year_month && typeof d.year_month === 'string') {
                    const year = d.year_month.split('-')[0];
                    yearlyPlays[year] = (yearlyPlays[year] || 0) + d.play_count;
                }
            });

            const playsCtx = document.getElementById('playsChart');
            if (playsCtx) {
                new Chart(playsCtx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(yearlyPlays),
                        datasets: [{
                            label: 'Plays',
                            data: Object.values(yearlyPlays),
                            backgroundColor: 'rgba(29, 185, 84, 0.8)',
                            borderColor: '#1DB954',
                            borderWidth: 2,
                            borderRadius: 8,
                            hoverBackgroundColor: 'rgba(29, 185, 84, 1)',
                            hoverBorderColor: '#1DB954',
                            hoverBorderWidth: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                titleColor: '#1DB954',
                                bodyColor: '#FFFFFF',
                                borderColor: '#1DB954',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.y.toLocaleString() + ' plays';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const year = Object.keys(yearlyPlays)[elements[0].index];
                                const plays = Object.values(yearlyPlays)[elements[0].index];
                                alert(`${year}: ${plays.toLocaleString()} total plays`);
                            }
                        }
                    }
                });
            }

            // Chart 3: Top 10 Artists (Horizontal Bar)
            const topArtistsCtx = document.getElementById('topArtistsChart');
            if (topArtistsCtx && SPOTIFY_DATA.stats) {
                const topArtists = Object.entries(SPOTIFY_DATA.stats.top_artists_all_time).slice(0, 10);
                new Chart(topArtistsCtx, {
                    type: 'bar',
                    data: {
                        labels: topArtists.map(([artist]) => artist),
                        datasets: [{
                            label: 'Plays',
                            data: topArtists.map(([, count]) => count),
                            backgroundColor: [
                                'rgba(29, 185, 84, 0.9)',
                                'rgba(139, 92, 246, 0.9)',
                                'rgba(236, 72, 153, 0.9)',
                                'rgba(59, 130, 246, 0.9)',
                                'rgba(245, 158, 11, 0.9)',
                                'rgba(239, 68, 68, 0.9)',
                                'rgba(99, 102, 241, 0.9)',
                                'rgba(16, 185, 129, 0.9)',
                                'rgba(251, 146, 60, 0.9)',
                                'rgba(168, 85, 247, 0.9)'
                            ],
                            borderRadius: 8,
                            borderWidth: 0
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                titleColor: '#1DB954',
                                bodyColor: '#FFFFFF',
                                borderColor: '#1DB954',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.x.toLocaleString() + ' plays';
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            },
                            y: {
                                grid: { display: false },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const index = elements[0].index;
                                const artist = topArtists[index][0];
                                alert(`${artist}: ${topArtists[index][1].toLocaleString()} total plays`);
                            }
                        }
                    }
                });
            }

            // Chart 4: Monthly Listening Pattern (Average by Month)
            const monthlyPatternCtx = document.getElementById('monthlyPatternChart');
            if (monthlyPatternCtx) {
                const monthlyAvg = {};
                monthlyData.forEach(d => {
                    if (d && d.year_month && typeof d.year_month === 'string') {
                        const month = d.year_month.split('-')[1];
                        if (!monthlyAvg[month]) monthlyAvg[month] = { total: 0, count: 0 };
                        monthlyAvg[month].total += (d.minutes_played / 60);
                        monthlyAvg[month].count += 1;
                    }
                });

                const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                const avgData = monthNames.map((_, i) => {
                    const monthKey = String(i + 1).padStart(2, '0');
                    return monthlyAvg[monthKey] ? monthlyAvg[monthKey].total / monthlyAvg[monthKey].count : 0;
                });

                new Chart(monthlyPatternCtx, {
                    type: 'radar',
                    data: {
                        labels: monthNames,
                        datasets: [{
                            label: 'Avg Hours',
                            data: avgData,
                            backgroundColor: 'rgba(29, 185, 84, 0.2)',
                            borderColor: '#1DB954',
                            borderWidth: 3,
                            pointBackgroundColor: '#1DB954',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: '#1DB954',
                            pointRadius: 4,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                titleColor: '#1DB954',
                                bodyColor: '#FFFFFF',
                                borderColor: '#1DB954',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.r.toFixed(1) + ' avg hours';
                                    }
                                }
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)', backdropColor: 'transparent' },
                                pointLabels: { color: 'rgba(255, 255, 255, 0.8)', font: { size: 12 } }
                            }
                        }
                    }
                });
            }

            // Chart 5: Listening Activity Timeline (Area)
            const activityTimelineCtx = document.getElementById('activityTimelineChart');
            if (activityTimelineCtx) {
                new Chart(activityTimelineCtx, {
                    type: 'line',
                    data: {
                        labels: monthlyData.map(d => d.year_month),
                        datasets: [{
                            label: 'Total Plays',
                            data: monthlyData.map(d => d.play_count),
                            backgroundColor: 'rgba(139, 92, 246, 0.3)',
                            borderColor: '#8b5cf6',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 3,
                            pointHoverRadius: 6,
                            pointBackgroundColor: '#8b5cf6',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                titleColor: '#8b5cf6',
                                bodyColor: '#FFFFFF',
                                borderColor: '#8b5cf6',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    title: function(context) {
                                        return context[0].label;
                                    },
                                    label: function(context) {
                                        return context.parsed.y.toLocaleString() + ' plays';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)', maxTicksLimit: 20 }
                            }
                        }
                    }
                });
            }
        }

        function toggleCard(cardId) {
            const card = document.getElementById(cardId);
            card.classList.toggle('expanded');

            if (card.classList.contains('expanded')) {
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    initScrollAnimations(card);
                }, 100);
            }
        }

        function initScrollAnimations(card) {
            const scrollContainer = card.querySelector('.work-details');
            const sections = card.querySelectorAll('.scroll-section');

            if (!scrollContainer || !sections.length) return;
            if (sections[0]) sections[0].classList.add('visible');

            scrollContainer.addEventListener('scroll', () => {
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const containerRect = scrollContainer.getBoundingClientRect();
                    const isVisible = rect.top < containerRect.bottom - 100 && rect.bottom > containerRect.top + 100;
                    if (isVisible) section.classList.add('visible');
                });
            });

            scrollContainer.dispatchEvent(new Event('scroll'));
        }

        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw-1Ug6SYktFirnQKSSkLr6pxTExJpTXdPfEnp6RWKmnIt56fkXk4siFgIp1KjBvBeY/exec';

        document.getElementById('socialListeningForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('nameInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();
            const resultDiv = document.getElementById('demoResult');

            if (!name || !email) return;

            resultDiv.innerHTML = '⏳ Sending...';
            resultDiv.style.display = 'block';

            try {
                fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email })
                }).catch(err => console.log('Google Sheets:', err));

                const response = await fetch('https://coryzillergithubio-production.up.railway.app/send-demo', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email })
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    resultDiv.innerHTML = `<strong>✅ Success!</strong><br><br>Check ${email} for the report!`;
                } else {
                    throw new Error(data.error || 'Failed');
                }
            } catch (error) {
                resultDiv.innerHTML = `<strong>❌ Error</strong><br><br>${error.message}`;
            }
        });
    </script>
</body>
</html>
